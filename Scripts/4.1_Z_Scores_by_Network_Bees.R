########################################################################################################################################################
#SCRIPT TO CALCULATE Z-SCORES, MERGE WITH TRAIT DATA AND MERGE WITH FUNCTIONAL GROUPS (JUST SUBSET OF QUANTITATIVE NETWORKS)

#1) LOAD LONG FORMAT QUANTITATIVE NETWORKS WITH POLL GUILDS (with and without apis mellifera)

#2) CALCULATE Z-SCORES

#3) SAVE DATA
########################################################################################################################################################

#LOAD LIBRARIES
library(data.table)

########################################################################################################################################################
#1) LOAD LONG FORMAT DATA, TRAIT DATA AND FUNCTIONAL GROUP DATA
########################################################################################################################################################
long_d <- read.csv("Data/Csv/long_format_quantitative_networks_all_bee.csv")
########################################################################################################################################################
#2) CALCULATE Z-SCORES
########################################################################################################################################################

#ALL SPECIES
#Select data with interaction greater than 0
long_d_1 <- long_d[long_d$Interaction>0,]

#Calculate Z-scores BY NETWORK (ID)!!
long_d_1 <- data.table(long_d_1)
long_d_1[, Z_scores := scale(Interaction,center = TRUE, scale = TRUE), by = Id]

########################################################################################################################################################
#3) SAVE DATA
########################################################################################################################################################
#save data for all species
write.csv(long_d_1, "Data/Csv/long_format_quantitative_networks_Z_scores_all_bee.csv")
########################################################################################################################################################
########################################################################################################################################################
########################################################################################################################################################


